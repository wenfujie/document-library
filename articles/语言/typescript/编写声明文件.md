- [声明文件](#声明文件)
  - [包已存在声明文件](#包已存在声明文件)
  - [书写声明文件](#书写声明文件)
    - [\<script\> 标签引入的包](#script-标签引入的包)
    - [npm 包](#npm-包)

## 声明文件

当使用第三方库时，我们需要引用它的声明文件，才能获得对应的代码补全、接口提示等功能。

如 `jQuery` ，引入后直接使用如 `$.get(URL, callback)` 时，ts 会报错，因为 ts 不知道何为 `$` ，更不知道 `$` 有哪些属性方法。所以需要 [`声明文件`](https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html) 让 ts 识别到第三方的特性。

声明文件是以 xxx.d.ts 的格式命名。

### 包已存在声明文件

根据以下两种方式来判断一个包是否存在声明文件：

1. 包的 package.json 中有 types 字段，或者有一个 index.d.ts 声明文件。这种模式不需要额外安装其他包。
2. 发布到 @types 里。我们只需要在 [社区声明文件网站](https://www.typescriptlang.org/dt/search) 上即可查询是否存在已维护的声明文件。这种模式一般是由于 npm 包的维护者没有提供声明文件，所以只能由其他人将声明文件发布到 @types 里了。

其中 方式 2 直接 `npm i @types/xxx -D` 下载即可无需额外配置。

例如为 jQuery 添加声明文件：

```js
npm install @types/jquery --save-dev
```

### 书写声明文件

当一个第三方库没有提供声明文件时，我们就需要自己书写声明文件了。

#### \<script\> 标签引入的包

当通过 \<script\> 标签引入第三方库，需注入全局变量

```js
// src/jQuery.d.ts
declare let $: (selector: string) => any;
```

```js
$("#foo");
```

#### npm 包

如何为 npm 包写声明文件：[前往查看](https://ts.xcatliu.com/basics/declaration-files.html#npm-%E5%8C%85)
