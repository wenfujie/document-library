import{_ as s,c as i,o as a,a2 as t}from"./chunks/framework.Bek_Mmwg.js";const E=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"前端进阶/安全/CSP内容安全策略.md","filePath":"前端进阶/安全/CSP内容安全策略.md"}'),n={name:"前端进阶/安全/CSP内容安全策略.md"},e=t(`<h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h2><p><code>CSP(Content-Security-Policy)</code>是一个HTTP response header, 它描述允许页面控制用户代理能够为指定的页面加载哪些资源, 可防止XSS攻击。</p><h3 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Security</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Policy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: 指令1 value1 value2 value3; 指令2 value1 value2;</span></span></code></pre></div><p>nginx 使用举例：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_header</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Content-Security-Policy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> img-src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a.b.c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">script-src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;unsafe-inline&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a.b.c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">style-src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;self&#39;</span></span></code></pre></div><h3 id="常用指令" tabindex="-1">常用指令 <a class="header-anchor" href="#常用指令" aria-label="Permalink to &quot;常用指令&quot;">​</a></h3><p>以下指令用于限制仅限加载指定域下的字体、iframe、img、script等</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">font</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">frame</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">media</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">src</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">等等</span></span></code></pre></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Security-Policy" target="_blank" rel="noreferrer">MDN查看更多指令</a></p><h3 id="常用值" tabindex="-1">常用值 <a class="header-anchor" href="#常用值" aria-label="Permalink to &quot;常用值&quot;">​</a></h3><p><strong>指定域</strong></p><p>其中 * 表示通配符：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https://*.qq.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https://a.b.com</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.qq.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">www.qq.com</span></span></code></pre></div><p><strong>self</strong></p><p>仅能加载当前域下的资源</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 只能加载当前域下的样式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_header</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Content-Security-Policy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> style-src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;self&#39;</span></span></code></pre></div><p><strong>unsafe-inline</strong></p><p>允许使用内联资源，例如内联<code>javascript</code>元素</p>`,19),h=[e];function l(p,k,r,d,c,o){return a(),i("div",null,h)}const y=s(n,[["render",l]]);export{E as __pageData,y as default};
